Extracted from https://github.com/nixos/nixpkgs at commit b2abc0e2e565a62148f885e992361ea7efd00de7, modified to build from https://github.com/neovide/neovide/pull/1870.
